<!--
  VL3X Factory Preset Inspector - Examples Page
  Designed & Implemented - Mike Levine - V2.0 01 Feb 2026
  All VL3x details copyright 2026 TC Helicon. All Rights Reserved.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>VL3X MIDI & SysEx Workflows</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    :root {
      --bg: #1a1a2e;
      --panel-bg: rgba(0, 0, 0, 0.3);
      --card-bg: rgba(0, 0, 0, 0.2);
      --border: rgba(255, 255, 255, 0.1);
      --text: #e0e0e0;
      --text-muted: #888;
      --accent: #00d4ff;
      --accent-green: #10b981;
      --accent-orange: #f59e0b;
    }

    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
    }

    .examples-container {
      display: flex;
      height: 100vh;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }

    .examples-nav {
      width: 280px;
      height: 100vh;
      background: var(--panel-bg);
      border-right: 1px solid var(--border);
      padding: 0.5rem;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .examples-nav h1 {
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
      color: var(--accent);
    }

    .back-link {
      display: inline-block;
      margin-bottom: 0.5rem;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.8rem;
    }

    .back-link:hover {
      color: var(--accent);
    }

    .nav-links {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .nav-links a {
      display: block;
      padding: 0.5rem 0.75rem;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      text-decoration: none;
      font-size: 0.85rem;
      transition: all 0.2s;
    }

    .nav-links a:hover {
      border-color: var(--accent);
      background: rgba(0, 212, 255, 0.1);
    }

    .nav-links a.active {
      background: rgba(0, 212, 255, 0.2);
      border-color: var(--accent);
      color: var(--accent);
    }

    .nav-section {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }

    .nav-section h3 {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .timing-list {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem;
      list-style: none;
      font-size: 0.75rem;
    }

    .timing-list li {
      display: flex;
      justify-content: space-between;
      padding: 0.2rem 0;
      border-bottom: 1px solid var(--border);
    }

    .timing-list li:last-child {
      border-bottom: none;
    }

    .timing-list strong {
      color: var(--accent);
    }

    .examples-main {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
    }

    .content-section {
      background: var(--panel-bg);
      border-radius: 8px;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
    }

    .content-section h2 {
      color: var(--accent);
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .content-section h3 {
      color: var(--text);
      margin-top: 0.75rem;
      margin-bottom: 0.35rem;
      font-size: 0.95rem;
    }

    .content-section p {
      line-height: 1.5;
      margin-bottom: 0.5rem;
      color: var(--text);
      font-size: 0.85rem;
    }

    .step-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem 0.75rem;
      margin: 0.35rem 0;
      display: flex;
      gap: 0.6rem;
    }

    .step-number {
      color: var(--accent);
      font-weight: bold;
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: none;
      border: 1px solid var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
    }

    .step-content {
      flex: 1;
    }

    .step-content h4 {
      color: var(--accent);
      margin: 0 0 0.2rem 0;
      font-size: 0.85rem;
    }

    .step-content p {
      margin: 0.15rem 0;
      font-size: 0.8rem;
    }

    .step-content ul {
      margin: 0.2rem 0;
      padding-left: 1.25rem;
      font-size: 0.8rem;
    }

    .step-content li {
      margin-bottom: 0.15rem;
    }

    .step-content code {
      display: block;
      background: #0d1117;
      color: var(--accent-green);
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-family: 'Monaco', 'Menlo', monospace;
    }

    .highlight-box {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-left: 4px solid var(--accent);
      padding: 0.5rem 0.75rem;
      border-radius: 0 6px 6px 0;
      margin: 0.5rem 0;
    }

    .highlight-box.warning {
      border-left-color: var(--accent-orange);
      background: rgba(245, 158, 11, 0.1);
    }

    .highlight-box.info {
      border-left-color: var(--accent-green);
      background: rgba(16, 185, 129, 0.1);
    }

    .highlight-box h4 {
      color: var(--accent-orange);
      margin: 0 0 0.2rem 0;
      font-size: 0.85rem;
    }

    .highlight-box.info h4 {
      color: var(--accent-green);
    }

    .highlight-box p {
      margin: 0;
      font-size: 0.8rem;
    }

    .example-box {
      background: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      padding: 0.75rem;
      font-size: 0.85rem;
    }

    .example-box h4 {
      margin: 0 0 0.5rem 0;
      color: var(--accent);
      font-size: 0.9rem;
    }

    .example-box .label {
      margin: 0.5rem 0 0.25rem 0;
      color: var(--text-muted);
      font-size: 0.8rem;
    }

    .example-box code {
      display: block;
      color: #9ca3af;
      font-size: 0.8rem;
      font-family: 'Monaco', 'Menlo', monospace;
    }

    .example-box code.sysex {
      color: var(--accent-green);
      font-size: 0.75rem;
    }

    .sysex-structure {
      background: #0d1117;
      border-radius: 4px;
      padding: 0.5rem;
      margin: 0.5rem 0;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.7rem;
    }

    .sysex-structure .header { color: #f59e0b; }
    .sysex-structure .cmd { color: #00d4ff; }
    .sysex-structure .data { color: #10b981; }
    .sysex-structure .comment { color: #6b7280; }

    .save-warning {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.4);
      border-radius: 6px;
      padding: 0.75rem;
      margin-top: 0.75rem;
      font-size: 0.85rem;
    }

    .save-warning .title {
      margin: 0 0 0.5rem 0;
      color: var(--accent-orange);
      font-size: 0.9rem;
      font-weight: 600;
    }

    .save-warning code {
      display: block;
      color: var(--accent-green);
      font-size: 0.75rem;
      font-family: 'Monaco', 'Menlo', monospace;
    }

    .save-warning p {
      margin: 0.5rem 0 0 0;
      color: var(--accent-orange);
      font-size: 0.8rem;
    }

    .save-warning .note {
      color: var(--text-muted);
    }

    .formula-box {
      background: #0d1117;
      border-radius: 4px;
      padding: 0.5rem 0.75rem;
      margin: 0.25rem 0;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.75rem;
      color: var(--accent-green);
    }

    @media (max-width: 768px) {
      .examples-container {
        flex-direction: column;
        overflow-y: auto;
      }
      .examples-nav {
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }
    }
  </style>
</head>
<body>
  <div class="examples-container">
    <nav class="examples-nav">
      <a href="index.html#sysex" class="back-link">&larr; Back to SysEx</a>
      <h1>VL3X Control</h1>
      <p style="color:var(--text-muted);font-size:0.8rem;">MIDI & SysEx Workflows<a href="index.html" class="panel-home-btn" title="Home">&#8962;</a></p>

      <div class="nav-links">
        <a href="index.html#generator">GTR, VOC & Setup</a>
        <a href="index.html#mixer">Mixing Desk</a>
        <a href="examples.html" class="active">Examples & Workflows</a>
      </div>

      <div class="nav-section">
        <h3>Timing (Verified USB)</h3>
        <ul class="timing-list">
          <li><span>After PC/CC switch</span><strong>0ms</strong></li>
          <li><span>After Editor Enable</span><strong>0ms</strong></li>
          <li><span>Between 0x22 writes</span><strong>0ms</strong></li>
          <li><span>After Preset Store</span><strong>500ms</strong></li>
        </ul>
        <p style="font-size:0.65rem;color:var(--text-muted);margin-top:0.4rem;">USB MIDI tested 100+ iterations at 0ms. Add 20-50ms for DIN MIDI.</p>
      </div>

      <div class="nav-section">
        <h3>Key SysEx Commands</h3>
        <ul class="timing-list">
          <li><span>Editor Enable</span><strong>0x15</strong></li>
          <li><span>Parameter Write</span><strong>0x22</strong></li>
          <li><span>Store to Preset</span><strong>0x24</strong></li>
          <li><span>Request Preset</span><strong>0x45</strong></li>
        </ul>
      </div>
    </nav>

    <main class="examples-main">
      <div class="content-section">
        <h2>VL3X MIDI & SysEx Workflows</h2>
        <p>Control your VL3X from onSong, Morningstar MC-8, Stage Traxx 4, or any MIDI controller that supports SysEx messaging.</p>

        <div class="highlight-box info">
          <h4>MIDI SOURCE Setting</h4>
          <p>VL3X can only receive from USB OR DIN-5 MIDI, not both. Set MIDI SOURCE in Setup to match your connection.</p>
        </div>

        <!-- Working Example -->
        <div class="example-box">
          <h4>Complete Example: Load Preset 300, Change Amp to BODYREZ1</h4>

          <p class="label">1. Load Preset (Bank Select + PC):</p>
          <code>CC0 = 0</code>
          <code>CC32 = 2</code>
          <code>PC = 43</code>

          <p class="label">2. Enable Editor Mode:</p>
          <code class="sysex">F0 00 01 38 00 6D 15 00 F7</code>

          <p class="label">3. Set Amp TYPE = BodyRez1 (value 25):</p>
          <code class="sysex">F0 00 01 38 00 6D 22 00 21 00 00 00 19 F7</code>
        </div>

        <!-- Section A: Switch Presets -->
        <h3>A. Switch to a Preset (PC/CC)</h3>
        <p>Load a preset using standard MIDI messages. No SysEx required.</p>

        <div class="highlight-box">
          <h4>Preset Addressing Formula (VERIFIED)</h4>
          <p>PC/CC uses 0-indexed addressing:</p>
          <div class="formula-box">bank = (slot - 1) // 128<br>pc = (slot - 1) % 128</div>
        </div>

        <div class="step-card">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>For Presets 1-128</h4>
            <p>Send Program Change only. Value = preset - 1.</p>
            <p><strong>Preset 1:</strong> PC = 0</p>
            <p><strong>Preset 50:</strong> PC = 49</p>
            <p><strong>Preset 128:</strong> PC = 127</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>For Presets 129-500</h4>
            <p>Send Bank Select (CC0 + CC32), then Program Change.</p>
            <ul>
              <li><strong>CC0:</strong> Always 0</li>
              <li><strong>CC32:</strong> (preset - 1) / 128 (rounded down)</li>
              <li><strong>PC:</strong> (preset - 1) % 128</li>
            </ul>
            <p><strong>Preset 129:</strong> CC0=0, CC32=1, PC=0</p>
            <p><strong>Preset 256:</strong> CC0=0, CC32=1, PC=127</p>
            <p><strong>Preset 300:</strong> CC0=0, CC32=2, PC=43</p>
            <p><strong>Preset 500:</strong> CC0=0, CC32=3, PC=115</p>
          </div>
        </div>

        <!-- Section B: Change Parameters Live -->
        <h3>B. Change Parameters Live</h3>
        <p>Modify any parameter in real-time. Changes are <strong>temporary</strong>, lost when you switch presets.</p>

        <div class="highlight-box warning">
          <h4>Editor Enable Required</h4>
          <p>You MUST send 0x15 (Editor Enable) before any 0x22 parameter writes will affect the live state.</p>
        </div>

        <div class="step-card">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>Load Your Preset</h4>
            <p>Use the PC/CC method from Section A.</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>Send Editor Enable (0x15)</h4>
            <code>F0 00 01 38 00 6D 15 00 F7</code>
            <p style="margin-top:0.3rem;color:var(--text-muted);">Required once per session. Enables parameter control.</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">3</div>
          <div class="step-content">
            <h4>Send Parameter Changes (0x22)</h4>
            <p>Use the <a href="index.html#generator" style="color:var(--accent);">SysEx Generator</a> or <a href="index.html#mixer" style="color:var(--accent);">Mixing Desk</a> to build commands.</p>
            <div class="sysex-structure">
              <span class="header">F0 00 01 38 00 6D</span> <span class="cmd">22</span> <span class="data">[page] [param] [v0] [v1] [v2] [v3]</span> <span class="header">F7</span><br>
              <span class="comment">│                    │   │              │</span><br>
              <span class="comment">│ TC Helicon header  │   │ 4-byte value │</span><br>
              <span class="comment">│                    │   └─ 7-bit safe  │</span><br>
              <span class="comment">│                    └─ param write cmd │</span>
            </div>
            <p style="margin-top:0.3rem;font-size:0.75rem;color:var(--text-muted);">page = sysex_id >> 7, param = sysex_id & 0x7F</p>
          </div>
        </div>

        <!-- Section C: Store Changes Permanently -->
        <h3>C. Store Changes Permanently (0x24)</h3>

        <div class="highlight-box warning">
          <h4>Use With Caution</h4>
          <p>Stored changes overwrite the preset permanently. This is rarely needed for live performance. Consider whether you really need to save, or if temporary changes are sufficient.</p>
        </div>

        <div class="step-card">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>Complete Steps 1-3 from Section B</h4>
            <p>Load preset, enable editor, send parameter changes.</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>Send Store Command (0x24)</h4>
            <code>F0 00 01 38 00 6D 24 00 F7</code>
            <p style="margin-top:0.3rem;color:var(--text-muted);">Wait 500ms after store before sending more commands.</p>
          </div>
        </div>

        <!-- Section D: Common Mistakes -->
        <h3>D. Common Mistakes to Avoid</h3>

        <div class="step-card">
          <div class="step-number">!</div>
          <div class="step-content">
            <h4>Forgetting Editor Enable</h4>
            <p>0x22 writes do nothing without sending 0x15 first. Send it once after connecting.</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">!</div>
          <div class="step-content">
            <h4>Wrong Preset Formula</h4>
            <p>PC/CC uses (slot-1) formula. SysEx 0x45/0x20 uses slot directly. These are different!</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">!</div>
          <div class="step-content">
            <h4>Sending to Uninitialized Preset</h4>
            <p>PC to an empty slot is ignored. The preset must exist before you can load or modify it.</p>
          </div>
        </div>

        <div class="step-card">
          <div class="step-number">!</div>
          <div class="step-content">
            <h4>Too Fast on DIN MIDI</h4>
            <p>USB MIDI works at 0ms delays. DIN MIDI needs 20-50ms between commands to avoid "PACKAGES LOST" errors.</p>
          </div>
        </div>

      </div>
    </main>
  </div>

</body>
</html>
